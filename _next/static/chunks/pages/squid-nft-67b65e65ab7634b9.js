(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{7417:function(e,t,n){"use strict";var r=n(2809),c=(n(7294),n(5893));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.children,n=e.style,r=e.className;return(0,c.jsx)("div",{className:"site-layout-background ".concat(r),style:a({padding:24},n),children:t})}},2858:function(e,t,n){"use strict";var r=n(8080),c=n(7744),s=(n(7294),n(7495)),a=n(2035),i=n(452),o=n(2636),l=n(5553),u=n(7417),p=n(5893);t.Z=function(e){var t=e.tokenAddress,n=e.tokenName,f=e.coingeckoId,d=e.tokenImage,v=(0,s.K)().account,h=(0,a.d)(t),x=(0,i.m)(t,v),y=(0,o.y)(f,"CNY"),b=(0,o.y)(f);return(0,p.jsx)("div",{children:(0,p.jsx)(u.Z,{children:(0,p.jsxs)(r.Z,{size:"large",children:[(0,p.jsx)(c.Z,{loading:!x,prefix:(0,p.jsx)("img",{className:"prefix",src:d,alt:"balance"}),title:n,value:x&&(0,l.bM)(x,18),precision:2}),y&&(0,p.jsx)(c.Z,{prefix:(0,p.jsx)("img",{className:"prefix",src:"/cny.png",alt:"price"}),title:"CNY \u4ef7\u683c",value:y,precision:2}),b&&(0,p.jsx)(c.Z,{prefix:(0,p.jsx)("img",{className:"prefix",src:"/usd.png",alt:"price"}),title:"USD \u4ef7\u683c",value:b,precision:2}),(0,p.jsx)(c.Z,{loading:!h,prefix:(0,p.jsx)("img",{className:"prefix",src:"/totalSupply.png",alt:"totalSupply"}),title:"\u603b\u4f9b\u5e94\u91cf",value:null!==h&&void 0!==h&&h.totalSupply?(0,l.bM)(h.totalSupply,null===h||void 0===h?void 0:h.decimals):0,precision:2})]})})})}},4485:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(7294),c=n(2858),s=n(1891),a=n(266),i=n(809),o=n.n(i),l=n(7763),u=n(6542),p=n(5209),f=n(1710),d=n(1413),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M380 704h264c4.4 0 8-3.6 8-8v-84c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v36H428v-36c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v84c0 4.4 3.6 8 8 8zm340-123a40 40 0 1080 0 40 40 0 10-80 0zm239-167.6L935.3 372a8 8 0 00-10.9-2.9l-50.7 29.6-78.3-216.2a63.9 63.9 0 00-60.9-44.4H301.2c-34.7 0-65.5 22.4-76.2 55.5l-74.6 205.2-50.8-29.6a8 8 0 00-10.9 2.9L65 413.4c-2.2 3.8-.9 8.6 2.9 10.8l60.4 35.2-14.5 40c-1.2 3.2-1.8 6.6-1.8 10v348.2c0 15.7 11.8 28.4 26.3 28.4h67.6c12.3 0 23-9.3 25.6-22.3l7.7-37.7h545.6l7.7 37.7c2.7 13 13.3 22.3 25.6 22.3h67.6c14.5 0 26.3-12.7 26.3-28.4V509.4c0-3.4-.6-6.8-1.8-10l-14.5-40 60.3-35.2a8 8 0 003-10.8zM840 517v237H184V517l15.6-43h624.8l15.6 43zM292.7 218.1l.5-1.3.4-1.3c1.1-3.3 4.1-5.5 7.6-5.5h427.6l75.4 208H220l72.7-199.9zM224 581a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"car",theme:"outlined"},h=n(1783),x=function(e,t){return r.createElement(h.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:t,icon:v}))};x.displayName="CarOutlined";var y=r.forwardRef(x),b=n(7495),g=n(452),m=function(e,t,n,r){return new(n||(n=Promise))((function(c,s){function a(e){try{o(r.next(e))}catch(t){s(t)}}function i(e){try{o(r.throw(e))}catch(t){s(t)}}function o(e){var t;e.done?c(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,i)}o((r=r.apply(e,t||[])).next())}))},w=function(e,t){var n,r,c,s,a={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(c=2&s[0]?r.return:s[0]?r.throw||((c=r.return)&&c.call(r),0):r.next)&&!(c=c.call(r,s[1])).done)return c;switch(r=0,c&&(s=[2&s[0],c.value]),s[0]){case 0:case 1:c=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(c=(c=a.trys).length>0&&c[c.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!c||s[1]>c[0]&&s[1]<c[3])){a.label=s[1];break}if(6===s[0]&&a.label<c[1]){a.label=c[1],c=s;break}if(c&&a.label<c[2]){a.label=c[2],a.ops.push(s);break}c[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(i){s=[6,i],r=0}finally{n=c=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}};var j=function(e,t){(0,r.useEffect)((function(){var t=e(),n=!1;return function(){m(this,void 0,void 0,(function(){var e;return w(this,(function(r){switch(r.label){case 0:if("function"!==typeof t[Symbol.asyncIterator])return[3,4];r.label=1;case 1:return[4,t.next()];case 2:return e=r.sent(),n||e.done?[3,3]:[3,1];case 3:return[3,6];case 4:return[4,t];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(),function(){n=!0}}),t)},k=n(3275),Z=n(5893),S=l.Z.Text,O=function(){var e=(0,b.K)().account,t=(0,g.m)(s.HU,e),n=(0,s.Q4)(),c=n.checkNftMinterAllowance,i=n.approveNftMinter,l=(0,s.XR)(),d=l.getPricesInBSW,v=l.mintBus,h=(0,s.s5)().getUserInfo,x=(0,r.useState)(!1),m=x[0],w=x[1],O=(0,r.useState)(!1),N=O[0],P=O[1],B=(0,r.useState)(!1),_=B[0],z=B[1],E=(0,r.useState)(null),I=E[0],C=E[1],M=(0,r.useState)(null),D=M[0],H=M[1];console.log("userInfo",D),console.log("pricesInBSW",I),j((0,a.Z)(o().mark((function t(){var n,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=20;break}return t.prev=1,t.next=4,c(e);case 4:return n=t.sent,P(n),t.next=8,d();case 8:return r=t.sent,C(r),t.next=12,h(e);case 12:s=t.sent,H(s),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),console.error(t.t0),u.ZP.error(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[1,16]])}))),[e]);var T=function(){var e=(0,a.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,i();case 4:e.sent.status&&(P(!0),p.Z.success({message:"Congratulations!",description:"Successfully authorized BSW"})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),u.ZP.error("".concat(e.t0.message)),console.error(e.t0);case 12:w(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.prev=1,e.next=4,v();case 4:(t=e.sent).status&&(n=t.events[3].args,p.Z.success({message:"Congratulations!",description:(0,Z.jsxs)("div",{children:[(0,Z.jsxs)("div",{children:["Your bus ",(0,Z.jsxs)(S,{type:"success",children:["$",null===n||void 0===n?void 0:n.tokenId.toString()]})," is successfully minted."]}),(0,Z.jsxs)("div",{children:["Bus level is ",(0,Z.jsxs)(S,{type:"success",children:["$",null===n||void 0===n?void 0:n.level.toString()]}),"."]})]}),duration:null})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),u.ZP.error("".concat(e.t0.message)),console.error(e.t0.message);case 12:z(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsx)("div",{children:N&&I&&t&&D?(0,Z.jsx)(f.Z,{type:"primary",size:"middle",disabled:I.playerPrice>(0,k.z)(t)||"0"===D.allowedBusBalance||D.busBalance>=D.allowedBusBalance&&1e3*D.secToNextBus>Date.now(),icon:(0,Z.jsx)(y,{}),loading:_,onClick:A,children:"Mint Bus"}):(0,Z.jsx)(f.Z,{type:"primary",loading:m,onClick:T,children:"Approve Bus"})})},N=n(7417),P=function(){return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(c.Z,{tokenAddress:s.HU,tokenName:"BSW",coingeckoId:"biswap",tokenImage:"/tokens/bsw.svg"}),(0,Z.jsx)(N.Z,{style:{marginTop:"16px"},children:(0,Z.jsx)(O,{})})]})}},225:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/squid-nft",function(){return n(4485)}])}},function(e){e.O(0,[59,744,891,774,888,179],(function(){return t=225,e(e.s=t);var t}));var t=e.O();_N_E=t}]);